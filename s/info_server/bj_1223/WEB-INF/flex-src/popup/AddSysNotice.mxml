<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" xmlns:timePicker="common.*" 
	fontSize="12" width="564" height="356" xmlns:vo="vo.*" label="添加公告" title="添加公告"
	showCloseButton="true" close="{PopUpManager.removePopUp(this)}">
	<mx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.managers.PopUpManager;
			import vo.SysNotice;
			import mx.controls.Alert;
			[Bindable]
            public var startDate:Date = new Date();
           	[Bindable]
           	public var endDate:Date = new Date();
			[Bindable]
			public var ac:ArrayCollection= new ArrayCollection(
                [ 
                  {label:"定时公告", data:1}, 
                  {label:"循环公告", data:2} ]);;
			[Bindable] private var startTimeInteger:int = new Date().time/1000;
            [Bindable] private var endTimeInteger:int = new Date().time/1000;
			[Bindable]
			public function set sysNotice(rc:SysNotice):void{
				 this._sysNotice=rc;
				 picker.selectedDate=startDate;
				 picker1.selectedDate=endDate;
			}
			public function get sysNotice():SysNotice{
				 return this._sysNotice;
			}
			public function closeHandler(event:Event):void{
				
			}
		]]>
	</mx:Script>
	<vo:SysNotice id="_sysNotice" type="{type.selectedItem.data}" content="{content.text}" startTime="{startTimeInteger}" endTime="{endTimeInteger}" noticeTime="{parseInt(noticeTime.text)}"/>

<mx:HBox >
	<mx:Form width="536" height="308">
		<mx:FormItem label="公告类型：">
			<mx:HBox>
				<mx:ComboBox  dataProvider="{ac}" close="closeHandler(event)" id="type" width="122"/>
			</mx:HBox>
		</mx:FormItem>
		<mx:FormItem label="公告内容：">
			<mx:HBox>
				<mx:TextArea id="content" text="{sysNotice.content}" height="70" width="373"/>
			</mx:HBox>
		</mx:FormItem>
		<mx:FormItem label="开始时间：" width="500" height="39">
		        <timePicker:DateTimePicker id="picker" change="this.startTimeInteger = (picker.selectedDate.time/1000)" minuteIncrement="1" backgroundColor="#FFFFFF"/>
		</mx:FormItem>
		<mx:FormItem label="结束时间：" height="34" width="501">
		        <timePicker:DateTimePicker id="picker1" change="this.endTimeInteger = (picker1.selectedDate.time/1000)" minuteIncrement="1" backgroundColor="#FFFFFF"/>    
		</mx:FormItem>
		<mx:FormItem label="间隔时间：">
			<mx:HBox>
				<mx:TextInput id="noticeTime" text="{sysNotice.noticeTime}"/>
			</mx:HBox>
		</mx:FormItem>
		<mx:FormItem>
		<mx:ControlBar>
			<mx:Button id="save" label="保存"/>
			<mx:Button id="close" label="取消"/>
		</mx:ControlBar>	
		</mx:FormItem>
	</mx:Form>
			
</mx:HBox>		
</mx:TitleWindow>
